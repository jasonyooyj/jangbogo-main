# AI 대화와 지도 연동 작업 계획

## 문제점 분석
현재 ChatPage에서 AI 응답을 단순 키워드 매칭으로 상품을 찾아 지도로 연결하고 있습니다. 이 방식은 불안정하며, AI 응답과 지도 간의 연동이 원활하지 않습니다.

## 작업 목표
AI 대화 응답에서 언급된 상품들을 자동으로 감지하고, 해당 상품들을 지도 페이지로 직접 연동하여 보여줄 수 있도록 개선합니다.

## 작업 항목

### 1. OpenAI 서비스 개선 (간단한 JSON 응답 형식)
- [x] `openai.js`의 시스템 프롬프트 수정: AI가 응답 끝에 JSON 형식으로 상품 ID 목록 포함
- [x] AI 응답 파싱 함수 추가: JSON 부분 추출하여 상품 ID 배열 반환
- [x] 에러 처리 및 로깅 추가

### 2. ChatPage 업데이트
- [x] AI 응답에서 JSON 형식의 상품 ID 추출 로직 추가
- [x] 추출한 상품 ID로 실제 상품 객체 찾기
- [x] 키워드 매칭은 폴백(fallback)으로 유지
- [x] 상품이 있을 때 지도 연동 버튼 표시 개선

### 3. 테스트 및 디버깅
- [x] 콘솔 로그로 상품 추출 과정 확인 가능하도록 로깅 추가
- [x] 다양한 쿼리로 테스트 (예: "우유 어디 있어?", "떡볶이 재료 찾아줘")

## 검토 사항

### 변경 사항 요약

#### 1. `src/services/openai.js` 수정
- **시스템 프롬프트 개선**: AI 응답 끝에 `[PRODUCT_IDS]...[/PRODUCT_IDS]` 형식으로 상품 ID 배열을 포함하도록 지시 추가
- **JSON 파싱 함수 추가**:
  - `extractProductIds()`: AI 응답에서 JSON 블록을 추출하여 상품 ID 배열 반환
  - `removeJsonBlock()`: AI 응답에서 JSON 블록을 제거하여 깔끔한 텍스트만 반환
- **반환 형식 변경**: `getChatResponse()`가 이제 `{text, productIds}` 객체를 반환하도록 변경
- **에러 처리**: JSON 파싱 실패 시 빈 배열 반환 및 콘솔 로그 출력
- **로깅 추가**: 상품 ID 추출 과정을 콘솔에 로그로 출력

#### 2. `src/pages/ChatPage.jsx` 수정
- **응답 처리 개선**: `getChatResponse()`의 반환 객체에서 `text`와 `productIds` 추출
- **상품 매칭 로직 개선**:
  1. 먼저 AI가 반환한 상품 ID로 실제 상품 객체 찾기
  2. ID 매칭이 실패하면 기존 키워드 매칭 방식으로 폴백
- **로깅 추가**: 상품 추출 과정을 콘솔에 로그로 출력하여 디버깅 가능

### 작동 방식
1. 사용자가 채팅으로 질문 (예: "우유 어디 있어?")
2. AI가 자연어 응답 + JSON 블록으로 상품 ID 반환
3. JSON 블록 파싱하여 상품 ID 추출
4. 상품 ID로 실제 상품 객체 찾기
5. 찾은 상품이 있으면 지도 연동 버튼 표시
6. 버튼 클릭 시 MapPage로 해당 상품들의 위치 안내

### 추가 개선 가능한 부분
- AI가 JSON 블록을 반환하지 않는 경우를 대비한 더 강화된 키워드 매칭 로직
- 상품 이름의 부분 일치 처리 개선
- 여러 상품이 언급된 경우 우선순위 정렬

---

# 떡볶이 떡 이미지 파일 수정 작업

## 문제점
떡볶이 떡(id: 7)의 이미지 URL이 깨져서 표시되지 않습니다.

## 작업 목표
떡볶이 떡의 이미지 URL을 작동하는 이미지 URL로 교체합니다.

## 작업 항목
- [x] mockData.js에서 떡볶이 떡(id: 7)의 이미지 URL 확인
- [x] 작동하는 이미지 URL로 교체
- [ ] 브라우저에서 이미지가 정상적으로 표시되는지 확인

## 검토 사항

### 변경 사항 요약

#### `src/data/mockData.js` 수정
- **떡볶이 떡 이미지 URL 교체**: 깨진 Unsplash 이미지 URL을 새로운 이미지 URL로 교체
  - 이전 URL: `https://images.unsplash.com/photo-1626804475297-411f7c1b4c80?auto=format&fit=crop&w=800&q=80`
  - 새로운 URL: `https://images.unsplash.com/photo-1571091655789-405eb7a3a3a8?auto=format&fit=crop&w=800&q=80`
- 변경된 라인: 9번 라인의 상품 ID 7 (떡볶이 떡)

### 확인 필요 사항
- 브라우저에서 이미지가 정상적으로 표시되는지 확인
- 이미지가 여전히 표시되지 않으면 브라우저 콘솔에서 에러 메시지 확인

---

# 떡볶이 떡 이미지 파일 재수정 작업 (근본적 해결)

## 문제점
떡볶이 떡(id: 7)의 이미지 URL이 계속 깨지고 있습니다. Unsplash 이미지 URL이 불안정하여 재발 가능성이 있습니다.

## 작업 목표
1. 이미지 로드 실패 시 에러 핸들링 추가
2. 더 안정적인 이미지 URL로 교체하거나 placeholder 표시
3. 이미지가 로드되지 않을 때 대체 이미지 표시

## 작업 항목
- [x] 이미지 컴포넌트에 onError 핸들러 추가 (이미지 로드 실패 시 콘솔 로그)
- [x] 떡볶이 떡 이미지 URL을 더 안정적인 이미지로 교체
- [x] 이미지가 로드되지 않을 때 placeholder 또는 기본 이미지 표시

## 검토 사항

### 변경 사항 요약

#### 1. `src/data/mockData.js` 수정
- **떡볶이 떡 이미지 URL 교체**: 안정적인 Unsplash 이미지 URL로 교체
  - 새로운 URL: `https://images.unsplash.com/photo-1588168333986-5078d3ae3976?auto=format&fit=crop&w=800&q=80`
  - 변경된 라인: 9번 라인의 상품 ID 7 (떡볶이 떡)

#### 2. `src/pages/ProductDetailPage.jsx` 수정
- **이미지 에러 핸들링 추가**:
  - `imageError` 상태 추가로 이미지 로드 실패 추적
  - `onError` 핸들러 추가: 이미지 로드 실패 시 콘솔에 에러 로그 출력 및 placeholder(📦) 표시
- 변경된 라인: 10번 라인 (상태 추가), 46번 라인 (이미지 태그에 onError 추가)

#### 3. `src/pages/HomePage.jsx` 수정
- **이미지 에러 핸들링 추가**:
  - `imageErrors` 상태 추가로 여러 이미지의 로드 실패 추적
  - `handleImageError` 함수 추가: 이미지 로드 실패 시 콘솔에 에러 로그 출력
  - 모든 상품 이미지에 `onError` 핸들러 추가: 로드 실패 시 placeholder(📦) 표시
- 변경된 라인: 1번 라인 (useState import), 9-13번 라인 (상태 및 핸들러 추가), 51번, 80번 라인 (이미지 태그에 onError 추가)

### 개선 사항
- 이미지가 로드되지 않을 때 placeholder(📦)를 표시하여 사용자 경험 개선
- 브라우저 콘솔에 이미지 로드 실패 정보를 출력하여 디버깅 가능
- 이미지 URL이 깨져도 애플리케이션이 정상적으로 작동

### 확인 필요 사항
- 브라우저에서 떡볶이 떡 이미지가 정상적으로 표시되는지 확인
- 이미지 로드 실패 시 placeholder가 정상적으로 표시되는지 확인
- 브라우저 콘솔에서 이미지 로드 실패 시 에러 메시지가 출력되는지 확인

---

# 레시피 질문 시 재료 표시 및 지도/장바구니 연동 기능

## 문제점
AI 대화에서 레시피를 물어봤을 때 재료 목록을 보여주지 않고, 각 재료의 위치 정보나 장바구니 추가 기능이 없습니다.

## 작업 목표
1. 레시피 관련 질문 시 필요한 재료들을 카드 형태로 표시
2. 각 재료에 위치 정보 표시 및 지도 연동
3. 각 재료에 장바구니 추가 기능 추가
4. 전체 재료를 한 번에 지도로 안내하는 기능

## 작업 항목

### 1. OpenAI 서비스에 RECIPES 정보 추가
- [ ] `openai.js`의 시스템 프롬프트에 RECIPES 데이터 포함
- [ ] 레시피 질문 시 레시피 ID를 JSON으로 반환하도록 설정

### 2. ChatPage에서 레시피 처리 로직 추가
- [ ] AI 응답에서 레시피 ID 추출
- [ ] 레시피 ID로 RECIPES 데이터에서 재료 목록 가져오기
- [ ] 재료 이름으로 PRODUCTS 매칭하여 실제 상품 객체 찾기

### 3. 재료 카드 컴포넌트 추가
- [ ] 각 재료를 카드 형태로 표시 (이미지, 이름, 가격, 위치)
- [ ] 각 재료 카드에 장바구니 추가 버튼 추가
- [ ] 각 재료 카드에 위치 안내 버튼 추가 (ProductLocationModal)
- [ ] 전체 재료 지도 안내 버튼 추가

### 4. 장바구니 연동
- [ ] CartContext의 addToCart 함수 사용
- [ ] 장바구니 추가 시 피드백 표시

## 검토 사항
- 작업 완료 후 변경 사항 요약
- 사용자 경험 개선 사항

---

# 장바구니 페이지에서 AI 대화 아이콘 가려지는 문제 수정

## 문제점 분석
장바구니 페이지(`CartPage`)의 하단 결제 섹션에 `z-10`이 설정되어 있어, Footer의 AI 대화 아이콘이 가려지는 문제가 발생합니다.

## 작업 목표
Footer에 적절한 z-index를 추가하여 항상 다른 요소들 위에 표시되도록 수정합니다.

## 작업 항목
- [x] `Footer.jsx`에 z-index 추가하여 항상 위에 표시되도록 수정

## 검토 사항

### 변경 사항 요약

#### `src/components/layout/Footer.jsx` 수정
- **z-index 추가**: Footer의 nav 요소에 `z-20` 클래스를 추가하여 항상 다른 요소들 위에 표시되도록 수정
  - 변경된 라인: 20번 라인
  - 이전: `className="bg-white border-t border-gray-200 px-6 py-2 flex justify-around items-center h-20 pb-4 safe-area-bottom"`
  - 이후: `className="bg-white border-t border-gray-200 px-6 py-2 flex justify-around items-center h-20 pb-4 safe-area-bottom z-20"`

### 개선 사항
- 장바구니 페이지에서도 Footer의 AI 대화 아이콘이 항상 클릭 가능하도록 개선
- Footer가 다른 페이지 요소들 위에 항상 표시되어 사용자 경험 개선

### 확인 필요 사항
- 장바구니 페이지에서 AI 대화 아이콘이 정상적으로 표시되고 클릭 가능한지 확인
- 다른 페이지에서도 Footer가 정상적으로 작동하는지 확인

---

# 배포 방법 문서화

## 작업 목표
jangbogo 프로젝트를 배포하기 위한 단계별 가이드를 작성하고 필요한 설정을 확인합니다.

## 작업 항목

### 1. 배포 전 확인 사항
- [ ] 환경 변수 설정 파일 확인 (.env.example 생성 여부)
- [ ] 빌드 스크립트 테스트
- [ ] 프로덕션 빌드 테스트
- [ ] 환경 변수 목록 문서화

### 2. Vercel 배포 가이드 작성
- [ ] Vercel 배포 단계별 문서 작성
- [ ] 환경 변수 설정 방법 안내
- [ ] 배포 후 확인 사항 작성

### 3. 기타 배포 옵션 가이드 작성 (선택사항)
- [ ] Netlify 배포 가이드
- [ ] GitHub Pages 배포 가이드

### 4. README 업데이트
- [x] 배포 섹션 추가
- [x] 환경 변수 설정 방법 추가

## 검토 사항

### 변경 사항 요약

#### 1. `DEPLOYMENT.md` 파일 생성
- **배포 가이드 문서 작성**: 단계별 배포 가이드 포함
  - 환경 변수 설정 안내
  - 배포 전 확인 사항
  - Vercel 배포 방법 (권장)
  - Netlify 배포 방법
  - GitHub Pages 배포 방법
  - 문제 해결 섹션
  - 배포 후 확인 사항

#### 2. `README.md` 업데이트
- **프로젝트 소개 추가**: 장보고 프로젝트 설명
- **주요 기능 섹션 추가**: 프로젝트의 핵심 기능 나열
- **기술 스택 섹션 추가**: 사용된 기술 명시
- **개발 환경 설정 섹션 추가**: 설치 및 실행 방법
- **배포 섹션 추가**: 빠른 배포 가이드 및 DEPLOYMENT.md 링크
- **프로젝트 구조 섹션 추가**: 폴더 구조 설명

#### 3. 빌드 테스트
- **프로덕션 빌드 성공 확인**: `npm run build` 명령어 실행 성공
- 빌드 결과물이 `dist` 폴더에 정상적으로 생성됨

#### 4. 환경 변수 확인
- **필수 환경 변수**: `VITE_OPENAI_API_KEY` (OpenAI API 키)
- 환경 변수 사용 위치: `src/services/openai.js`

### 배포 방법 요약

#### Vercel 배포 (가장 간단한 방법)
1. Vercel에 GitHub 저장소 연결
2. 환경 변수 `VITE_OPENAI_API_KEY` 설정
3. 자동 배포 완료

#### 기타 배포 옵션
- Netlify: 드래그 앤 드롭 또는 GitHub 연동
- GitHub Pages: GitHub Actions를 통한 자동 배포

### 확인 필요 사항
- 배포 전: 로컬에서 `npm run build` 및 `npm run preview`로 테스트
- 배포 후: 브라우저 콘솔에서 에러 확인
- 환경 변수: 배포 플랫폼에서 올바르게 설정되었는지 확인

---

# Git 저장소 설정 및 Vercel 배포 연동

## 문제점 분석
Hongik-main 전체를 Git 저장소로 만들어야 하는데, Vercel에서 배포할 때 jangbogo만 배포되도록 설정해야 합니다.

## 작업 목표
1. Hongik-main을 Git 저장소로 초기화
2. .gitignore 설정으로 불필요한 파일 제외
3. Vercel에서 Root Directory 설정 방법 문서화

## 작업 항목

### 1. Git 저장소 초기화
- [ ] Hongik-main 폴더를 Git 저장소로 초기화
- [ ] 기본 브랜치 설정

### 2. .gitignore 설정
- [ ] .gitignore 파일 업데이트
- [ ] node_modules, dist 등 빌드 결과물 무시
- [ ] 환경 변수 파일 무시
- [ ] .DS_Store 등 시스템 파일 무시

### 3. Vercel 배포 설정 문서화
- [x] Vercel Root Directory 설정 방법 추가
- [x] DEPLOYMENT.md 업데이트

## 검토 사항

### 변경 사항 요약

#### 1. Git 저장소 초기화
- **Hongik-main을 Git 저장소로 초기화**: `git init` 명령어 실행 완료
- Git 저장소가 `/Users/yoo/Library/Mobile Documents/com~apple~CloudDocs/00 University/25-2 (3학년 2학기)/AI활용과 스타트업/Hongik-main/.git/`에 생성됨

#### 2. `.gitignore` 파일 업데이트
- **루트 `.gitignore` 파일 생성/업데이트**: 불필요한 파일 제외 설정
  - `node_modules/` - 모든 하위 폴더의 node_modules 무시
  - `dist/` - 빌드 결과물 무시
  - `.env*.local` - 환경 변수 파일 무시
  - `.DS_Store` - macOS 시스템 파일 무시
  - 기타 로그, 캐시, 에디터 파일 등 무시

#### 3. 배포 문서 업데이트
- **`DEPLOYMENT.md` 업데이트**:
  - Vercel에서 Root Directory를 `AI_Startup/jangbogo`로 설정하는 방법 추가
  - Git 저장소 연결 시 Hongik-main 전체를 푸시하는 방법 안내
  - Root Directory 설정 오류 관련 문제 해결 섹션 추가

- **`GIT_SETUP.md` 파일 생성** (루트):
  - Git 저장소 초기화 방법
  - GitHub 저장소 연결 방법
  - Vercel 배포 시 Root Directory 설정 방법
  - 문제 해결 가이드

### Vercel 배포 시 주의사항

**⚠️ 중요**: Vercel에서 배포할 때 반드시 다음 설정이 필요합니다:

1. **Root Directory**: `AI_Startup/jangbogo`로 설정
   - Vercel Dashboard → 프로젝트 → Settings → General → Root Directory
   - 이 설정을 하지 않으면 Hongik-main 루트에서 빌드를 시도하여 실패합니다

2. **환경 변수**: `VITE_OPENAI_API_KEY` 설정
   - Vercel Dashboard → 프로젝트 → Settings → Environment Variables

### 다음 단계

1. GitHub 저장소 생성 및 연결:
   ```bash
   git add .
   git commit -m "Initial commit"
   git remote add origin <your-github-repo-url>
   git push -u origin main
   ```

2. Vercel에서 배포:
   - New Project → GitHub 저장소 선택
   - Root Directory를 `AI_Startup/jangbogo`로 설정
   - 환경 변수 설정
   - 배포 완료

---

# 오늘의 AI 추천상품에 장바구니 추가 기능 구현

## 문제점
현재 HomePage의 "오늘의 AI 추천 상품" 섹션에는 위치 안내 버튼(Navigation 아이콘)만 있고, 장바구니에 상품을 추가하는 기능이 없습니다.

## 작업 목표
"오늘의 AI 추천 상품" 섹션의 각 상품 카드에 장바구니 추가 버튼을 추가하고, 실제로 장바구니에 상품이 추가되도록 구현합니다.

## 작업 항목

### 1. HomePage에 장바구니 기능 추가
- [ ] `useCart` 훅 import 추가
- [ ] `addToCart` 함수 가져오기
- [ ] "오늘의 AI 추천 상품" 섹션에 장바구니 추가 버튼 추가
- [ ] 장바구니 추가 핸들러 함수 구현
- [ ] 사용자 피드백 제공 (콘솔 로그)

### 2. UI 개선
- [ ] 장바구니 버튼과 위치 안내 버튼을 함께 표시하도록 레이아웃 조정
- [ ] 버튼 스타일링 (기존 디자인과 일관성 유지)

## 검토 사항
- 작업 완료 후 변경 사항 요약
- 사용자 경험 개선 사항

---

# 지난 장보기 내역에서 장바구니 추가 기능 버그 수정

## 문제점
- 홈 화면의 **지난 장보기 내역** 섹션에서 장바구니 아이콘(🛒)을 눌러도 실제 `CartContext`의 장바구니 상태가 변경되지 않고, 단순 `alert`만 표시됩니다.

## 작업 목표
- 지난 장보기 내역 카드의 장바구니 버튼이 실제로 **장바구니에 상품을 추가**하도록 수정하고, 브라우저 콘솔 로그를 통해 동작을 확인할 수 있게 합니다.

## 작업 항목
- [x] `HomePage.jsx`에서 지난 장보기 내역 카드 버튼 클릭 시 `CartContext`의 `addToCart`를 호출하도록 수정
- [x] 동일 상품을 여러 번 추가할 때 수량이 정상적으로 증가하는지 확인
- [x] 장바구니 페이지에서 추가된 상품이 보이는지 확인
- [x] 브라우저 콘솔에 장바구니 추가 관련 로그 출력 (클릭 시 상품 정보와 장바구니 상태 확인)

## 리뷰/정리 (작업 완료 후 작성)
- [x] 어떤 코드가 어떻게 변경되었는지 요약  
  - `HomePage.jsx`에서 지난 장보기 내역 카드의 장바구니 버튼이 `addToCart(item.product)`를 호출하도록 수정하고, 기존 `alert`는 유지했습니다.
- [x] 브라우저 콘솔/네트워크 로그에서 확인한 사항 정리  
  - 버튼 클릭 시 `[지난 장보기] 장바구니 추가 클릭` 로그가 상품 ID/이름/가격과 함께 정상적으로 출력되고, `/cart` 페이지에서 수량 증가 및 총액 반영을 확인했습니다.
- [x] 추가로 필요한 개선사항 또는 후속 작업 메모  
  - 추후에는 최근 구매 내역에서도 수량을 직접 조절하거나 바로 결제로 이동하는 UX 개선을 고려할 수 있습니다.

---

# 오늘의 AI 레시피 추천 클릭 시 동작 개선 (YouTube 새 창 이동 → 좌측 임베드)

## 문제점
- 홈 화면의 **오늘의 AI 레시피 추천 👨‍🍳** 섹션에서 카드를 클릭하면, 레시피에 `videoUrl`이 있을 경우 바로 YouTube 새 탭으로 이동합니다.
- 사용자가 원하는 동작은 **YouTube로 이동하는 것이 아니라, 화면 왼쪽에 관련 YouTube 영상을 임베드(내장)하고 오른쪽에 나머지 정보/기능을 함께 보여주는 레이아웃**입니다.
- 이미 `RecipeDetailPage.jsx`에서 좌측 영상 / 우측 재료·장바구니·위치 안내 UI가 구현되어 있으므로, 현재의 새 탭 이동은 UX 일관성을 깨뜨립니다.

## 작업 목표
1. **오늘의 AI 레시피 추천 카드 클릭 시 항상 내부 레시피 상세 페이지로 이동**하도록 수정합니다.
2. 레시피 상세 페이지의 **좌측 YouTube 임베드 + 우측 재료/위치/장바구니 UI**를 활용하여, 사용자가 원한 레이아웃으로 동작하도록 합니다.
3. 변경 후에도 YouTube 영상, 재료 목록, 장바구니/지도 연동이 정상 동작하는지 브라우저 콘솔 로그를 통해 확인합니다.

## 작업 항목

### 1. 클릭 동작 변경 (새 탭 YouTube 이동 제거)
- [x] `src/components/recipes/RecipeSection.jsx`에서 `handleRecipeClick` 동작 변경
  - [x] `recipe.videoUrl`이 있더라도 `window.open(recipe.videoUrl, '_blank')`를 사용하지 않도록 제거
  - [x] 항상 `navigate('/recipe/:id')`로 이동하도록 단순화 (`navigate(\`/recipe/${recipe.id}\`)`)

### 2. 레이아웃/동작 확인 (이미 구현된 상세 페이지 활용)
- [ ] `src/pages/RecipeDetailPage.jsx`에서 **좌측 YouTube / 우측 정보** 레이아웃이 정상적으로 보이는지 확인
  - [ ] `iframe`이 `recipe.embedUrl || recipe.videoUrl`를 사용해 올바른 YouTube 영상이 로드되는지 확인
  - [ ] 스크롤/반응형 레이아웃이 깨지지 않는지 확인
- [ ] 재료/상품 연동 기능 동작 확인
  - [ ] 관련 상품 리스트, 인분 수 조절, 전체 선택/개별 선택, 장바구니 담기, 위치 안내 모달이 정상 동작하는지 확인

### 3. 브라우저 콘솔/UX 검증
- [ ] 레시피 카드 클릭 → 상세 페이지 진입 과정에서 **오류 로그가 없는지** 브라우저 콘솔 확인
- [ ] YouTube 차단/네트워크 에러 시 콘솔에 경고/에러가 뜨더라도 앱이 깨지지 않는지 확인
- [ ] 전체 플로우(홈 → 레시피 카드 클릭 → 상세 페이지 시청/쇼핑)가 자연스럽고 일관적인지 UX 관점에서 점검

## 리뷰/정리 (작업 완료 후 작성)
- [ ] 어떤 코드가 어떻게 변경되었는지 요약  
- [ ] 브라우저 콘솔/네트워크 로그에서 확인한 사항 정리  
- [ ] 추가로 필요한 개선사항 또는 후속 작업 메모  

---

# 매장 지도(MapPage) UX 개선

## 문제점
- `MapPage`에서 기본 매장 레이아웃과 이동 애니메이션은 있지만,
  - 현재 안내 중인 상품 목록/상태를 한눈에 보기 어렵고
  - 목적지가 없는 경우(직접 지도를 열었을 때) 안내 문구 외에 사용 방법이 명확하지 않으며
  - "지도를 터치하여 목적지를 직접 설정할 수도 있습니다."라는 문구와 실제 기능이 연결되어 있지 않습니다.
- 브라우저 콘솔에 지도 안내 관련 로그가 거의 없어, 동선/타겟 상품 관련 버그가 생겨도 디버깅이 불편합니다.

## 작업 목표
1. `MapPage`에 **간단한 UX 개선**을 추가하여 사용자가 어떤 상품을 어디까지 안내받는지 더 분명하게 보여준다.
2. 목적지가 없을 때의 **빈 상태(Empty state)** 를 명확하게 표시해 사용 방법을 안내한다.
3. 지도 영역을 터치했을 때 **사용자 정의 목적지**를 간단히 설정할 수 있도록 구현해, 안내 문구와 실제 기능을 일치시킨다.
4. 지도 이동/안내 상태를 브라우저 콘솔에서 확인할 수 있도록 **필수 로그**를 추가한다.

## 작업 항목

### 1. MapPage 기본 UX 개선
- [x] 상단 "안내 중" 배너 아래에 현재 안내 대상 상품 리스트(이름, 구역)를 간단히 표시
- [x] 현재 단계(`currentStep`)에 해당하는 상품을 리스트에서도 시각적으로 강조
- [x] `targetProducts`가 비어 있을 때, "AI가 선택한 상품이 없습니다" + 사용 방법 안내 문구를 중앙에 표시
- [x] 레이아웃/스타일은 기존 Tailwind 구성 유지, 변경 범위를 `MapPage.jsx` 내부로 최소화

### 2. 지도 터치 시 사용자 정의 목적지 설정
- [x] 지도 캔버스 영역 클릭 이벤트를 추가하여 클릭 위치를 퍼센트 좌표로 변환
- [x] 클릭 시 임시 목적지(예: "사용자 지정 위치") 마커를 표시하고 카트 아이콘이 해당 위치까지 이동하도록 구현
- [x] 기존 `targetProducts` 경로 안내 로직과 충돌하지 않도록, 사용자 정의 목적지는 별도 상태로 관리
- [ ] "지도를 터치하여 목적지를 직접 설정할 수도 있습니다." 문구가 실제 동작과 일치하도록 동작 확인

### 3. 지도/안내 관련 콘솔 로그 추가
- [x] `MapPage` 진입 시 `targetProducts`와 초기 상태를 콘솔에 로그
- [x] 이동 시작/종료, `currentStep` 변경 시 간단한 로그 출력
- [x] 사용자 정의 목적지 클릭 시 좌표/상태를 콘솔에 로그
- [ ] 예외/에러 상황(예: 잘못된 위치 데이터) 발생 시 콘솔 경고 출력

### 4. 리뷰 및 정리
- [ ] 브라우저에서 AI → 지도 연동 시, 상품 리스트/경로/애니메이션이 의도대로 동작하는지 확인 (콘솔 로그 포함)
- [ ] 지도 직접 터치로 목적지를 설정했을 때 카트 이동 및 마커 표시가 자연스러운지 확인
- [ ] MapPage 변경 사항 요약 및 향후 Shadcn UI 도입 여지 메모

## 리뷰/정리 (작업 완료 후 작성)
- [x] 어떤 코드가 어떻게 변경되었는지 요약  
  - `MapPage.jsx`에서 상단 안내 중 상품 리스트, 빈 상태 안내, 사용자 지정 목적지 마커 및 카트 이동 로직을 추가하고, 진입/이동/클릭 시 필수 콘솔 로그를 남기도록 수정했습니다.
- [ ] 브라우저 콘솔/네트워크 로그에서 확인한 사항 정리  
- [ ] 추가로 필요한 개선사항 또는 후속 작업 메모  

---

# OpenAI API 키 누락 오류(Missing credentials) 근본 원인 해결

## 문제점
- 브라우저 콘솔에서 `Missing credentials. Please pass an \`apiKey\`, or set the \`OPENAI_API_KEY\` environment variable.` 에러가 발생하며, 번들된 파일(`index-*.js`) 로드 시 `new OpenAI(...)` 호출 단계에서 애플리케이션이 중단됩니다.
- 현재 `src/services/openai.js`에서 OpenAI 클라이언트를 모듈 로드 시점에 바로 생성하고 있어, `VITE_OPENAI_API_KEY`가 비어 있으면 앱 전체가 초기 로딩 단계에서 실패합니다.

## 작업 목표
1. 로컬 및 배포 환경에서 `VITE_OPENAI_API_KEY` 설정을 명확하게 정리하고, 빌드/배포 시 누락되지 않도록 합니다.
2. OpenAI 클라이언트 초기화 방식을 개선하여, API 키가 없더라도 앱 전체가 죽지 않고 **우아하게 실패**(명확한 안내 메시지 + 콘솔 로그)하도록 합니다.
3. 변경 범위를 `src/services/openai.js`와 문서(환경 변수/배포 관련)로 최소화하여, 다른 기능에 영향을 주지 않도록 합니다.

## 작업 항목
- [ ] 현재 OpenAI 초기화 방식 점검  
  - [ ] `src/services/openai.js`에서 `import.meta.env.VITE_OPENAI_API_KEY` 사용 위치와 동작 방식 재확인  
  - [ ] 에러가 실제로 클라이언트 생성 시점에서 발생하는지 브라우저 콘솔 스택트레이스로 재검증  
- [ ] 환경 변수 설정 정리  
  - [ ] 로컬 개발용 `.env` 예시(`.env.example`)에 `VITE_OPENAI_API_KEY` 명시  
  - [ ] `DEPLOYMENT.md`/문서에서 Vercel 등 배포 환경의 `VITE_OPENAI_API_KEY` 설정 절차를 한 줄로 다시 강조  
- [ ] OpenAI 클라이언트 초기화 로직 단순 개선  
  - [ ] 모듈 최상단에서 바로 `new OpenAI(...)`를 호출하지 않고, **지연 초기화(lazy init)** 또는 헬퍼 함수로 분리  
  - [ ] API 키가 없을 때는 OpenAI를 호출하지 않고, `getChatResponse`에서 바로 사용자용 오류 메시지를 반환하도록 처리  
  - [ ] 이 과정에서 변경 범위를 `openai.js` 내부로만 한정 (다른 컴포넌트/페이지는 인터페이스 변경 없음)  
- [ ] 브라우저 콘솔 로그/에러 메시지 정리  
  - [ ] API 키가 없거나 잘못된 경우, 콘솔에 명확한 경고 로그 남기기 (환경 변수 이름, 어디서 설정해야 하는지)  
  - [ ] 사용자에게는 기존과 유사한 한국어 안내 문구로 "AI 서비스 연결에 문제가 있습니다" 메시지 유지 또는 약간 개선  

## 리뷰/정리 (작업 완료 후 작성)
- [ ] 어떤 코드가 어떻게 변경되었는지 요약  
- [ ] 브라우저 콘솔에서 OpenAI 관련 에러/로그가 어떻게 바뀌었는지 정리  
- [ ] 로컬/배포 환경에서 확인한 사항 및 추가로 필요한 개선사항 메모  

---

# 레시피 YouTube 영상 URL 교체 (한우 스테이크 / 사과 샐러드)

## 문제점
- 현재 `RECIPES` 데이터에 설정된 YouTube 영상 URL이 기획에서 제공한 실제 영상 URL과 다르며, 추후 공유·운영 관점에서 관리하기 어렵습니다.
- 한우 스테이크와 사과 샐러드 레시피에 대해 지정된 YouTube URL로 교체하고, 상세 페이지 임베드용 URL도 함께 정리해야 합니다.

## 작업 목표
1. `RECIPES`의 "한우 스테이크와 구운 야채" 레시피의 `videoUrl`/`embedUrl`을 `https://youtu.be/22u9EFslalc` 기준으로 교체합니다.
2. `RECIPES`의 "신선한 사과 샐러드" 레시피의 `videoUrl`/`embedUrl`을 `https://youtu.be/slJbTNJH4bQ` 기준으로 교체합니다.
3. 레시피 상세 페이지에서 좌측 YouTube 임베드가 새 URL로 정상 재생되는지, 브라우저 콘솔 에러 여부를 함께 확인합니다.

## 작업 항목
- [x] `src/data/mockData.js`에서 `RECIPES` 배열 내 레시피 데이터 구조 확인
- [x] 한우 스테이크 레시피(`id: 1`)의 `videoUrl`/`embedUrl`을 새 YouTube URL 기준으로 교체  
      - `videoUrl`: `https://youtu.be/22u9EFslalc`  
      - `embedUrl`: `https://www.youtube.com/embed/22u9EFslalc`
- [x] 사과 샐러드 레시피(`id: 2`)의 `videoUrl`/`embedUrl`을 새 YouTube URL 기준으로 교체  
      - `videoUrl`: `https://youtu.be/slJbTNJH4bQ`  
      - `embedUrl`: `https://www.youtube.com/embed/slJbTNJH4bQ`
- [ ] 레시피 상세 페이지(`RecipeDetailPage`)에서 두 레시피를 각각 열어 YouTube 임베드가 정상 재생되는지 확인
- [ ] 브라우저 콘솔에서 관련 에러/경고 발생 여부 확인 및 필요 시 메모

## 리뷰/정리 (작업 완료 후 작성)
- [x] 어떤 코드가 어떻게 변경되었는지 요약  
  - `src/data/mockData.js`의 `RECIPES` 배열에서 한우 스테이크(`id: 1`)와 신선한 사과 샐러드(`id: 2`) 레시피의 `videoUrl`/`embedUrl`을 각각 `https://youtu.be/22u9EFslalc`, `https://youtu.be/slJbTNJH4bQ` 기준으로 교체했습니다.
- [ ] 브라우저 콘솔에서 레시피 영상 관련 에러/로그가 어떻게 보였는지 정리  
- [ ] 추가로 필요한 개선사항 또는 후속 작업 메모  

---

# 매장 지도 빈 상태 안내 겹침 버그 수정

## 문제점
- `MapPage`에서 안내 대상 상품이 없을 때 나오는 "안내 중인 상품이 없습니다." 안내 박스가 지도(매장 레이아웃) 위에 겹쳐서 표시되어, 지도가 가려지고 UI가 답답하게 보입니다.

## 작업 목표
1. 안내 대상이 없을 때의 안내 문구를 **지도 박스 바깥(상단/하단)** 으로 옮기거나, 지도와 겹치지 않는 형태로 단순하게 정리합니다.
2. 변경 범위는 `MapPage.jsx` 내부로만 최소화하여, 다른 페이지나 로직에는 영향을 주지 않습니다.
3. 수정 후 브라우저 콘솔에서 에러가 없는지, 레이아웃이 자연스럽게 보이는지 확인합니다.

## 작업 항목
- [ ] `MapPage.jsx`에서 빈 상태 안내 블록(`안내 중인 상품이 없습니다.`)의 위치/레이아웃을 조정  
  - [ ] 지도 정사각형 내부의 `absolute inset-0` 오버레이를 제거하거나, 상단/하단의 별도 영역으로 이동  
  - [ ] Tailwind 클래스만 단순 수정하여 레이아웃을 정리 (로직 변경 최소화)
- [ ] 모바일 화면에서 지도와 안내 문구가 서로 겹치지 않고 자연스럽게 보이는지 확인  
- [ ] 브라우저 콘솔에서 레이아웃 관련 에러/경고가 없는지 확인 (필요 시 로그 추가)

## 리뷰/정리 (작업 완료 후 작성)
- [x] 어떤 코드가 어떻게 변경되었는지 요약  
  - `MapPage.jsx`에서 지도 박스 내부를 전면 덮던 빈 상태 오버레이(`안내 중인 상품이 없습니다.`)를 제거하고, 하단 안내 바 텍스트에서 `targetProducts.length === 0`인 경우에만 동일한 안내 문구를 표시하도록 변경했습니다.
- [ ] 브라우저 콘솔/레이아웃 확인 결과 정리 (특히 지도/문구 겹침 여부)  
- [ ] 추가로 필요한 UX 개선사항 또는 후속 작업 메모  

---

# 오늘의 AI 추천상품 카드 클릭 동작 및 위치찾기 플로우 개선

## 문제 / 요구사항
- 현재 홈 화면의 **오늘의 AI 추천 상품 ✨** 섹션에서 카드 안의 버튼(네비게이션 아이콘)이 위치찾기처럼 보이지만, 실제로는 상품 상세 페이지로 이동합니다.
- 원하는 동작:
  1. **카드 전체(사각형 영역)를 클릭하면 상품 상세 페이지로 이동**
  2. **상품 상세 페이지 안에 "위치 찾기" 버튼을 두고, 이 버튼을 누르면 매장 지도(MapPage)로 이동**하는 구조

## 작업 목표
1. 오늘의 AI 추천상품 카드 전체를 클릭 영역으로 만들어 **상품 상세 페이지**로 이동하도록 수정
2. 상품 상세 페이지 내부에 명시적인 **"위치 찾기" 버튼**을 추가하고, 클릭 시 해당 상품을 대상으로 **MapPage**로 이동하도록 연동
3. 브라우저 콘솔 로그를 통해 카드 클릭 / 위치찾기 클릭 시 어떤 상품이 전달되는지 확인 가능하게 구현

## 작업 항목

### 1. HomePage 추천상품 카드 클릭 동작 수정
- [x] "오늘의 AI 추천 상품 ✨" 섹션에서 카드 전체에 `onClick`을 걸어 `/product/:id`로 이동하도록 수정
- [x] 기존 Navigation 아이콘 버튼은 제거하거나 단순 아이콘/텍스트로만 사용 (동작은 카드 전체 클릭에만 유지)
- [x] 카드에 `cursor-pointer` 등 시각적 피드백 추가 (클릭 가능 영역 명확화)

### 2. ProductDetailPage에 위치 찾기 버튼 추가
- [x] 상품 정보 영역에 **"위치 찾기" 버튼** 추가 (텍스트/아이콘 포함, Tailwind로 간단 스타일링)
- [x] 버튼 클릭 시 `navigate('/map', { state: { targetProducts: [product] } })` 형태로 MapPage에 현재 상품 전달
- [x] 클릭 시 브라우저 콘솔에 `[ProductDetailPage] 위치찾기 클릭` 로그와 함께 상품 ID/이름 출력

### 3. MapPage와 연동 확인
- [ ] ProductDetailPage에서 위치 찾기 버튼 클릭 시, MapPage에서 해당 상품이 `targetProducts`로 정상 표시되는지 확인
- [ ] 지도 상에 마커/안내 문구가 정상적으로 보이는지, 콘솔 로그(`initialProducts`, `targetProducts`)가 기대대로 출력되는지 확인

## 리뷰/정리 (작업 완료 후 작성)
- [x] 어떤 코드가 어떻게 변경되었는지 요약  
  - `HomePage.jsx`의 "오늘의 AI 추천 상품 ✨" 섹션에서 카드 전체에 `onClick={() => handleNavigate(product)}`를 추가하고 `cursor-pointer hover:shadow-md transition-shadow` 클래스를 더해, 카드 어디를 눌러도 상품 상세 페이지로 이동하도록 수정했습니다. 기존 Navigation 아이콘은 클릭 동작을 제거하고 단순 아이콘 표시용 `div`로 변경했습니다.
  - `ProductDetailPage.jsx`의 상품 정보 영역에 **"매장 위치 찾기"** 버튼을 추가하고, 클릭 시 콘솔에 `[ProductDetailPage] 위치찾기 클릭` 로그(상품 ID/이름/섹션/좌표 포함)를 남기며 `navigate('/map', { state: { targetProducts: [product] } })`로 MapPage에 현재 상품을 전달하도록 구현했습니다.
- [ ] 브라우저 콘솔에서 카드 클릭/위치찾기 클릭/MapPage 진입 시 로그가 어떻게 보였는지 정리  
- [ ] 추가로 필요한 UX 개선사항 또는 후속 작업 메모  

---

# 떡볶이 떡(id: 7) 이미지 URL(Pixabay) 404 재발 버그 근본 해결

## 문제점
- 브라우저 콘솔에 `이미지 로드 실패: 상품 ID 7 - https://cdn.pixabay.com/photo/2018/11/22/23/49/korean-food-3832308_1280.jpg` 에러가 반복적으로 발생합니다.
- 해당 URL은 더 이상 사용 불가(404/차단 등) 상태로 보이며, HomePage/상품 상세/지난 장보기 등에서 동일 이미지를 공유하므로 전체 UX에 영향을 줍니다.

## 작업 목표
1. 상품 ID 7(떡볶이 떡)의 이미지 URL을 **안정적인 Unsplash 이미지**로 교체합니다.
2. 기존에 추가한 이미지 에러 핸들링/플레이스홀더 로직은 그대로 유지하여, 변경 범위를 `mockData.js` 한 줄로 최소화합니다.
3. 교체 후 브라우저 콘솔에서 더 이상 해당 URL 관련 에러가 발생하지 않는지 확인합니다.

## 작업 항목
- [x] 브라우저 콘솔 로그를 통해 문제 URL 및 상품 ID 7과의 매핑 관계 확인
- [x] `src/data/mockData.js`에서 상품 ID 7의 `image` 필드가 Pixabay URL로 설정되어 있는지 확인
- [x] 다른 상품과 일관된 스타일의 **안정적인 Unsplash 떡볶이 이미지 URL** 하나 선정
- [x] `src/data/mockData.js`의 상품 ID 7 `image` 값을 새로운 Unsplash URL로 교체 (해당 라인만 수정)
- [ ] 로컬에서 페이지 새로고침 후 HomePage/상품 상세 페이지에서 이미지가 정상 표시되는지 확인
- [ ] 브라우저 콘솔에서 이전 Pixabay URL 관련 에러가 더 이상 발생하지 않는지 확인 (필요 시 스크린샷/로그 메모)

## 검토 및 리뷰 (작업 완료 후 작성)
- [ ] 어떤 코드가 어떻게 변경되었는지 한 줄로 요약  
- [ ] 브라우저 콘솔에서 이미지 관련 에러 로그가 어떻게 변했는지 정리  
- [ ] 추가로 필요한 이미지/에셋 관련 개선사항 또는 후속 작업 메모  

---

# 장바구니 취소 버튼 크기/터치 영역 개선

## 문제점
- 장바구니 페이지에서 각 상품 오른쪽 상단의 **취소(X) 버튼**이 작게 느껴지고, 터치 영역도 좁아서 모바일 환경에서 누르기 불편합니다.

## 작업 목표
- Cart 페이지의 **취소(X) 버튼 아이콘 크기와 터치 영역을 키워서** 모바일에서도 쉽게 누를 수 있게 개선하되, **삭제 동작 로직은 그대로 유지**합니다.

## 작업 항목
- [ ] `CartPage.jsx`에서 장바구니 아이템의 취소(X) 버튼 JSX 위치와 클래스 확인
- [ ] X 아이콘 크기를 키우기 (예: `size={18}` → 약간 더 큰 값으로 조정)
- [ ] 버튼에 적당한 `padding`/`rounded`/배경 클래스를 추가해서 **터치 가능한 영역**을 넓힘
- [ ] 스타일 변경 후에도 `removeFromCart` 호출이 정상 동작하는지 장바구니에서 직접 확인
- [ ] 브라우저 콘솔에서 에러가 없는지, 필요 시 클릭 로그로 동작을 한 번 확인

## 리뷰/정리 (작업 완료 후 작성)
- [ ] 어떤 코드가 어떻게 변경되었는지 요약  
- [ ] 브라우저에서 취소 버튼이 눈에 띄게 커지고, 모바일에서 누르기 쉬워졌는지 체크  
- [ ] 브라우저 콘솔에서 장바구니 취소 관련 오류/경고 발생 여부 정리  
